<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Main</title>
  <!-- Bootstrap core CSS -->
  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> -->

  <link rel="stylesheet" href= "https://stackpath.bootstrapcdn.com/bootswatch/4.1.3/sketchy/bootstrap.min.css" >
  <!-- Custom fonts for this template -->
  <!-- <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet"> -->

  <!-- Custom styles for this template -->

  <!-- my app -->
  <script src="scripts/Upload.js"></script>
</head>

<body>
  <div id="elm"></div>
  <script>

    var myApp = Elm.Main.init({
        node: document.getElementById('elm'),
        flags: "" 
    });


    myApp.ports.sendOpenFile.subscribe(function(file) {
        console.log("open file: ", file);

        var fr = new FileReader(file)

        fr.onloadend=function(ev)
        {
            console.log("res: " + fr.result);
        }

        var data = new Blob();
        fr.readAsText(data);
        myApp.ports.recvOpenFile.send(window.btoa(data));

    }); 

  </script>
</body>
</html>